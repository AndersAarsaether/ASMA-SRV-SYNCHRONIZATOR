env: test
service:
    imageName: 'asma-srv-synchronizator'
    port: '8000'
    config:
        env:
            NODE_ENV: development
            PORT: 8000

            DEBUG_MODE: 'true'

            SRV_DIRECTORY: https://test.adopus.no/api/directory
            SRV_PROXY: https://test.adopus.no/api/proxy

            SALT_VERSION: 2
            TIME_TO_LIVE: 60
            LOCAL_CACHE_TTL: 3600

            DEVELOPMENT: true

            SIGNICAT_CLIENT_ID: 'preprod.advoca.no'
            SIGNICAT_REDIRECT_URI: 'https://test.advoca.no/auth/callback'
            SIGNICAT_GRANT_TYPE: 'authorization_code'
            SIGNICAT_AUTH: 'https://preprod.signicat.com/oidc/authorize'
            SIGNICAT_TOKEN: 'https://preprod.signicat.com/oidc/token'
            SIGNICAT_KEYS: 'https://preprod.signicat.com/oidc/userinfo'

            LINKMOBILITY_URL: https://wsx.sp247.net/sms/send
            LINKMOBILITY_PLATFORM_ID: COMMON_API
            LINKMOBILITY_PLATFORMPARTNER_ID: 17077
            ENVIRONMENT: 'test'
    secrets:
        encode: false
        env:
            JWT_SECRET: 'replaceme'
            SRV_DIRECTORY_SECRET: 'replaceme'
            SIGNICAT_USERNAME: 'replaceme'
            SIGNICAT_PASSWORD: 'replaceme'
            LINKMOBILITY_USER_NAME: 'replaceme'
            LINKMOBILITY_PASSWORD: 'replaceme'
            PREDEFINED_USER_SECRETS: 'replaceme'
            SIGNICAT_CLIENT_SECRET: 'replaceme'
            JWT_DEVICE_AUTHORIZATION_SECRET: 'replaceme'
ingress:
    annotations:
        nginx.ingress.kubernetes.io/rewrite-target: /$1
        nginx.ingress.kubernetes.io/proxy-connect-timeout: '300'
        nginx.ingress.kubernetes.io/proxy-next-upstream-timeout: '300'
        nginx.ingress.kubernetes.io/proxy-buffer-size: '256k'
    hosts:
        - host: test.advoca.no
          path: /api/auth/(.*)
          certificate: tls-advoca-adopus
        - host: fretex-test.advoca.no
          path: /api/auth/(.*)
          certificate: tls-advoca-adopus
        - host: test.adopus.no
          path: /api/auth/(.*)
          certificate: tls-advoca-adopus
        - host: advoca-test.adcuris.no
          path: /api/auth/(.*)
          certificate: tls-adcuris
        - host: admin-test.avans.no
          path: /api/auth/(.*)
          certificate: tls-avans
        - host: fretex-test.adopus.no
          path: /api/auth/(.*)
          certificate: tls-advoca-adopus
